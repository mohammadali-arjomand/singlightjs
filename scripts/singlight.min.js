class Singlight{constructor(e){this.property=e}mount(e){this.selector=document.querySelector(e),this.current=this.property.root+"/"+this.property.home,this.history=[],this.urlBuilder(this.current,!1)}urlBuilder(e){this.current=e,this.history.push(this.current),this.loader()}loader(){async function e(e,t){try{let r;void 0!==t.params&&(r={method:"POST",body:t.params});let i=await fetch(e,r),s=await i.text();i.ok&&t.renderer(s)}catch{}}e(this.current,this)}renderer(e){this.selector.innerHTML=e,this.scanner()}scanner(){document.querySelectorAll("a").forEach(e=>{e.addEventListener("click",t=>this.eventHandler(t,e))});document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",t=>this.eventHandler(t,e))})}eventHandler(e,t){"A"==e.target.nodeName?(e.preventDefault(),void 0!==t.href&&(this.params=void 0,this.urlBuilder(t.href,!1))):(e.preventDefault(),void 0!==t.action&&(this.params=new FormData(t),this.urlBuilder(t.action,!1)))}}