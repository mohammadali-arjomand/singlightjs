let URL_BASE=window.location.toString();class Singlight{mount(e){this.lifecycle(this.beforeMounted),this.app=document.querySelector(e),this.lifecycle(this.afterMounted),this.router(this.home)}router(e,t=null){this.lifecycle(this.beforeRouted);let l,r=URL_BASE+this.routes[e].url;if(null!==t){for(let i in t)r=r.replaceAll(`:${i}:`,t[i]);l=this.routes[e].controller(t)}else l=this.routes[e].controller();this.app.innerHTML=l,window.history.pushState({},"",r),this.lifecycle(this.afterRouted),this.render()}render(){this.lifecycle(this.beforeRendered),this.app.querySelectorAll("a").forEach(e=>e.addEventListener("click",t=>{t.preventDefault();let l,r={},i=e.getAttribute("variables");if(null!==i){for(let s of i.split("|"))r[(l=s.split("="))[0]]=l[1];this.router(e.getAttribute("route"),r)}else this.router(e.getAttribute("route"))})),this.app.querySelectorAll("form").forEach(e=>e.addEventListener("submit",e=>e.preventDefault())),this.app.querySelectorAll("[event]").forEach(e=>{let t=this.events[e.getAttribute("event")];e.addEventListener(t.event,e=>{let l=t.handler(e);void 0!==l&&this.router(l.route,void 0!==l.variables?l.variables:null)})}),this.lifecycle(this.afterRendered)}lifecycle(e){void 0!==e&&e()}}function template(e,t){let l=document.getElementById(e).innerHTML;for(let r in t)l=l.replaceAll(`:${r}:`,t[r]);return l}export{Singlight,template};