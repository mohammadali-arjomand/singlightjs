class Singlight{mount(e){this.lifecycle(this.beforeMounted),this.app=document.querySelector(e),this.lifecycle(this.afterMounted),this.router(this.home)}router(e,t=null){this.lifecycle(this.beforeRouted);let r,l=window.location.toString()+this.routes[e].url;if(null!==t){for(let i in t)l=l.replaceAll(`:${i}:`,t[i]);r=this.routes[e].controller(t)}else r=this.routes[e].controller();this.app.innerHTML=r,window.history.pushState({},"",l),this.lifecycle(this.afterRouted),this.render()}render(){this.lifecycle(this.beforeRendered),this.app.querySelectorAll("a").forEach(e=>e.addEventListener("click",t=>{t.preventDefault();let r,l={},i=e.getAttribute("variables");if(null!==i){for(let s of i.split("|"))l[(r=s.split("="))[0]]=r[1];this.router(e.getAttribute("route"),l)}else this.router(e.getAttribute("route"))})),this.app.querySelectorAll("form").forEach(e=>e.addEventListener("submit",e=>e.preventDefault())),this.app.querySelectorAll("[event]").forEach(e=>{let t=this.events[e.getAttribute("event")];e.addEventListener(t.event,e=>{let r=t.handler(e);void 0!==r&&this.router(r.route,void 0!==r.variables?r.variables:null)})}),this.lifecycle(this.afterRendered)}lifecycle(e){void 0!==e&&e()}}function template(e,t){let r=document.getElementById(e).innerHTML;for(let l in t)r=r.replaceAll(`:${l}:`,t[l]);return r}export{Singlight,template};